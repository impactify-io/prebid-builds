{"version":3,"file":"tcfControl.js","mappings":"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","sources":["webpack://prebid.js/../../modules/tcfControl.ts"],"sourcesContent":["/**\n * This module gives publishers extra set of features to enforce individual purposes of TCF v2\n */\n\nimport {deepAccess, logError, logWarn} from '../src/utils.js';\nimport {config} from '../src/config.js';\nimport adapterManager, {gdprDataHandler} from '../src/adapterManager.js';\nimport * as events from '../src/events.js';\nimport {EVENTS} from '../src/constants.js';\nimport {GDPR_GVLIDS, VENDORLESS_GVLID} from '../src/consentHandler.js';\nimport {\n  MODULE_TYPE_ANALYTICS,\n  MODULE_TYPE_BIDDER,\n  MODULE_TYPE_PREBID,\n  MODULE_TYPE_RTD,\n  MODULE_TYPE_UID\n} from '../src/activities/modules.js';\nimport {\n  ACTIVITY_PARAM_ANL_CONFIG,\n  ACTIVITY_PARAM_COMPONENT_NAME,\n  ACTIVITY_PARAM_COMPONENT_TYPE\n} from '../src/activities/params.js';\nimport {registerActivityControl} from '../src/activities/rules.js';\nimport {\n  ACTIVITY_ACCESS_DEVICE,\n  ACTIVITY_ACCESS_REQUEST_CREDENTIALS,\n  ACTIVITY_ENRICH_EIDS,\n  ACTIVITY_ENRICH_UFPD,\n  ACTIVITY_FETCH_BIDS,\n  ACTIVITY_REPORT_ANALYTICS,\n  ACTIVITY_SYNC_USER,\n  ACTIVITY_TRANSMIT_EIDS,\n  ACTIVITY_TRANSMIT_PRECISE_GEO,\n  ACTIVITY_TRANSMIT_UFPD\n} from '../src/activities/activities.js';\nimport {processRequestOptions} from '../src/ajax.js';\n\nexport const STRICT_STORAGE_ENFORCEMENT = 'strictStorageEnforcement';\n\nexport const ACTIVE_RULES = {\n  purpose: {},\n  feature: {}\n};\n\nconst CONSENT_PATHS = {\n  purpose: false,\n  feature: 'specialFeatureOptins'\n};\n\nconst CONFIGURABLE_RULES = {\n  storage: {\n    type: 'purpose',\n    default: {\n      purpose: 'storage',\n      enforcePurpose: true,\n      enforceVendor: true,\n      vendorExceptions: []\n    },\n    id: 1,\n  },\n  basicAds: {\n    type: 'purpose',\n    id: 2,\n    default: {\n      purpose: 'basicAds',\n      enforcePurpose: true,\n      enforceVendor: true,\n      vendorExceptions: []\n    }\n  },\n  personalizedAds: {\n    type: 'purpose',\n    id: 4,\n    default: {\n      purpose: 'personalizedAds',\n      enforcePurpose: true,\n      enforceVendor: true,\n      vendorExceptions: [],\n      eidsRequireP4Consent: false\n    }\n  },\n  measurement: {\n    type: 'purpose',\n    id: 7,\n    default: {\n      purpose: 'measurement',\n      enforcePurpose: true,\n      enforceVendor: true,\n      vendorExceptions: []\n    }\n  },\n  transmitPreciseGeo: {\n    type: 'feature',\n    id: 1,\n    default: {\n      purpose: 'transmitPreciseGeo',\n      enforcePurpose: true,\n      enforceVendor: true,\n      vendorExceptions: []\n    }\n  },\n} as const;\n\nconst storageBlocked = new Set();\nconst biddersBlocked = new Set();\nconst analyticsBlocked = new Set();\nconst ufpdBlocked = new Set();\nconst eidsBlocked = new Set();\nconst geoBlocked = new Set();\n\nlet hooksAdded = false;\nlet strictStorageEnforcement = false;\n\nconst GVLID_LOOKUP_PRIORITY = [\n  MODULE_TYPE_BIDDER,\n  MODULE_TYPE_UID,\n  MODULE_TYPE_ANALYTICS,\n  MODULE_TYPE_RTD\n];\n\nconst RULE_NAME = 'TCF2';\nconst RULE_HANDLES = [];\n\n// in JS we do not have access to the GVL; assume that everyone declares legitimate interest for basic ads\nconst LI_PURPOSES = [2];\nconst PUBLISHER_LI_PURPOSES = [2, 7, 9, 10];\n\ndeclare module '../src/config' {\n  interface Config {\n    /**\n     * Map from module name to that module's GVL ID. This overrides the GVL ID provided\n     * by the modules themselves.\n     */\n    gvlMapping?: { [moduleName: string]: number }\n  }\n}\n/**\n * Retrieve a module's GVL ID.\n */\nexport function getGvlid(moduleType, moduleName, fallbackFn) {\n  if (moduleName) {\n    // Check user defined GVL Mapping in pbjs.setConfig()\n    const gvlMapping = config.getConfig('gvlMapping');\n\n    // Return GVL ID from user defined gvlMapping\n    if (gvlMapping && gvlMapping[moduleName]) {\n      return gvlMapping[moduleName];\n    } else if (moduleType === MODULE_TYPE_PREBID) {\n      return VENDORLESS_GVLID;\n    } else {\n      let {gvlid, modules} = GDPR_GVLIDS.get(moduleName);\n      if (gvlid == null && Object.keys(modules).length > 0) {\n        // this behavior is for backwards compatibility; if multiple modules with the same\n        // name declare different GVL IDs, pick the bidder's first, then userId, then analytics\n        for (const type of GVLID_LOOKUP_PRIORITY) {\n          if (modules.hasOwnProperty(type)) {\n            gvlid = modules[type];\n            if (type !== moduleType) {\n              logWarn(`Multiple GVL IDs found for module '${moduleName}'; using the ${type} module's ID (${gvlid}) instead of the ${moduleType}'s ID (${modules[moduleType]})`);\n            }\n            break;\n          }\n        }\n      }\n      if (gvlid == null && fallbackFn) {\n        gvlid = fallbackFn();\n      }\n      return gvlid || null;\n    }\n  }\n  return null;\n}\n\n/**\n * Retrieve GVL IDs that are dynamically set on analytics adapters.\n */\nexport function getGvlidFromAnalyticsAdapter(code, config) {\n  const adapter = adapterManager.getAnalyticsAdapter(code);\n  return ((gvlid) => {\n    if (typeof gvlid !== 'function') return gvlid;\n    try {\n      return gvlid.call(adapter.adapter, config);\n    } catch (e) {\n      logError(`Error invoking ${code} adapter.gvlid()`, e);\n    }\n  })(adapter?.adapter?.gvlid);\n}\n\nexport function shouldEnforce(consentData, purpose, name) {\n  if (consentData == null && gdprDataHandler.enabled) {\n    // there is no consent data, but the GDPR module has been installed and configured\n    // NOTE: this check is not foolproof, as when Prebid first loads, enforcement hooks have not been attached yet\n    // This piece of code would not run at all, and `gdprDataHandler.enabled` would be false, until the first\n    // `setConfig({consentManagement})`\n    logWarn(`Attempting operation that requires purpose ${purpose} consent while consent data is not available${name ? ` (module: ${name})` : ''}. Assuming no consent was given.`);\n    return true;\n  }\n  return consentData && consentData.gdprApplies;\n}\n\nfunction getConsentOrLI(consentData, path, id, acceptLI) {\n  const data = deepAccess(consentData, `vendorData.${path}`);\n  return !!data?.consents?.[id] || (acceptLI && !!data?.legitimateInterests?.[id]);\n}\n\nfunction getConsent(consentData, type, purposeNo, gvlId) {\n  let purpose;\n  if (CONSENT_PATHS[type] !== false) {\n    purpose = !!deepAccess(consentData, `vendorData.${CONSENT_PATHS[type]}.${purposeNo}`);\n  } else {\n    const [path, liPurposes] = gvlId === VENDORLESS_GVLID\n      ? ['publisher', PUBLISHER_LI_PURPOSES]\n      : ['purpose', LI_PURPOSES];\n    purpose = getConsentOrLI(consentData, path, purposeNo, liPurposes.includes(purposeNo));\n  }\n  return {\n    purpose,\n    vendor: getConsentOrLI(consentData, 'vendor', gvlId, LI_PURPOSES.includes(purposeNo))\n  }\n}\n\n/**\n * This function takes in a rule and consentData and validates against the consentData provided. Depending on what it returns,\n * the caller may decide to suppress a TCF-sensitive activity.\n * @param {Object} rule - enforcement rules set in config\n * @param {Object} consentData - gdpr consent data\n * @param {string=} currentModule - Bidder code of the current module\n * @param {number=} gvlId - GVL ID for the module\n * @returns {boolean}\n */\nexport function validateRules(rule, consentData, currentModule, gvlId) {\n  const ruleOptions = CONFIGURABLE_RULES[rule.purpose];\n\n  // return 'true' if vendor present in 'vendorExceptions'\n  if ((rule.vendorExceptions || []).includes(currentModule)) {\n    return true;\n  }\n  const vendorConsentRequred = rule.enforceVendor && !((gvlId === VENDORLESS_GVLID || (rule.softVendorExceptions || []).includes(currentModule)));\n  const {purpose, vendor} = getConsent(consentData, ruleOptions.type, ruleOptions.id, gvlId);\n  return (!rule.enforcePurpose || purpose) && (!vendorConsentRequred || vendor);\n}\n\nfunction gdprRule(purposeNo, checkConsent, blocked = null, gvlidFallback: any = () => null) {\n  return function (params) {\n    const consentData = gdprDataHandler.getConsentData();\n    const modName = params[ACTIVITY_PARAM_COMPONENT_NAME];\n\n    if (shouldEnforce(consentData, purposeNo, modName)) {\n      const gvlid = getGvlid(params[ACTIVITY_PARAM_COMPONENT_TYPE], modName, gvlidFallback(params));\n      const allow = !!checkConsent(consentData, modName, gvlid);\n      if (!allow) {\n        blocked && blocked.add(modName);\n        return {allow};\n      }\n    }\n  };\n}\n\nfunction singlePurposeGdprRule(purposeNo, blocked = null, gvlidFallback: any = () => null) {\n  return gdprRule(purposeNo, (cd, modName, gvlid) => !!validateRules(ACTIVE_RULES.purpose[purposeNo], cd, modName, gvlid), blocked, gvlidFallback);\n}\n\nfunction exceptPrebidModules(ruleFn) {\n  return function (params) {\n    if (params[ACTIVITY_PARAM_COMPONENT_TYPE] === MODULE_TYPE_PREBID) {\n      // TODO: this special case is for the PBS adapter (componentType is 'prebid')\n      // we should check for generic purpose 2 consent & vendor consent based on the PBS vendor's GVL ID;\n      // that is, however, a breaking change and skipped for now\n      return;\n    }\n    return ruleFn(params);\n  };\n}\n\nexport const accessDeviceRule = ((rule) => {\n  return function (params) {\n    // for vendorless (core) storage, do not enforce rules unless strictStorageEnforcement is set\n    if (params[ACTIVITY_PARAM_COMPONENT_TYPE] === MODULE_TYPE_PREBID && !strictStorageEnforcement) return;\n    return rule(params);\n  };\n})(singlePurposeGdprRule(1, storageBlocked));\n\nexport const syncUserRule = singlePurposeGdprRule(1, storageBlocked);\nexport const enrichEidsRule = singlePurposeGdprRule(1, storageBlocked);\nexport const fetchBidsRule = exceptPrebidModules(singlePurposeGdprRule(2, biddersBlocked));\nexport const reportAnalyticsRule = singlePurposeGdprRule(7, analyticsBlocked, (params) => getGvlidFromAnalyticsAdapter(params[ACTIVITY_PARAM_COMPONENT_NAME], params[ACTIVITY_PARAM_ANL_CONFIG]));\nexport const ufpdRule = singlePurposeGdprRule(4, ufpdBlocked);\n\nexport const transmitEidsRule = exceptPrebidModules((() => {\n  // Transmit EID special case:\n  // by default, legal basis or vendor exceptions for any purpose between 2 and 10\n  // (but disregarding enforcePurpose and enforceVendor config) is enough to allow EIDs through\n  function check2to10Consent(consentData, modName, gvlId) {\n    for (let pno = 2; pno <= 10; pno++) {\n      if (ACTIVE_RULES.purpose[pno]?.vendorExceptions?.includes(modName)) {\n        return true;\n      }\n      const {purpose, vendor} = getConsent(consentData, 'purpose', pno, gvlId);\n      if (purpose && (vendor || ACTIVE_RULES.purpose[pno]?.softVendorExceptions?.includes(modName))) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  const defaultBehavior = gdprRule('2-10', check2to10Consent, eidsBlocked);\n  const p4Behavior = singlePurposeGdprRule(4, eidsBlocked);\n  return function (...args) {\n    const fn = ACTIVE_RULES.purpose[4]?.eidsRequireP4Consent ? p4Behavior : defaultBehavior;\n    return fn.apply(this, args);\n  };\n})());\n\nexport const transmitPreciseGeoRule = gdprRule('Special Feature 1', (cd, modName, gvlId) => validateRules(ACTIVE_RULES.feature[1], cd, modName, gvlId), geoBlocked);\n\n/**\n * Compiles the TCF2.0 enforcement results into an object, which is emitted as an event payload to \"tcf2Enforcement\" event.\n */\nfunction emitTCF2FinalResults() {\n  // remove null and duplicate values\n  const formatSet = function (st) {\n    return Array.from(st.keys()).filter(el => el != null);\n  };\n  const tcf2FinalResults = {\n    storageBlocked: formatSet(storageBlocked),\n    biddersBlocked: formatSet(biddersBlocked),\n    analyticsBlocked: formatSet(analyticsBlocked),\n    ufpdBlocked: formatSet(ufpdBlocked),\n    eidsBlocked: formatSet(eidsBlocked),\n    geoBlocked: formatSet(geoBlocked)\n  };\n\n  events.emit(EVENTS.TCF2_ENFORCEMENT, tcf2FinalResults);\n  [storageBlocked, biddersBlocked, analyticsBlocked, ufpdBlocked, eidsBlocked, geoBlocked].forEach(el => el.clear());\n}\n\nevents.on(EVENTS.AUCTION_END, emitTCF2FinalResults);\n\ntype TCFControlRule = {\n  purpose: keyof typeof CONFIGURABLE_RULES;\n  /**\n   * Determines whether to enforce the purpose consent.\n   */\n  enforcePurpose?: boolean;\n  /**\n   * Determines whether to check vendor signals for this purpose.\n   */\n  enforceVendor?: boolean;\n  /**\n   * Defines a list of bidder codes or module names that are exempt from determining legal basis for this Purpose.\n   * Note: Prebid.org recommends working with a privacy lawyer before making enforcement exceptions for any vendor.\n   */\n  vendorExceptions?: string[]\n  /**\n   * Defines a list of bidder codes or module names that are exempt from the checking vendor signals for this purpose.\n   * Unlike with vendorExceptions, Purpose consent is still checked.\n   * Note: Prebid.org recommends working with a privacy lawyer before making enforcement exceptions for any vendor.\n   */\n  softVendorExceptions?: string[]\n  /**\n   * Only relevant when `purpose` is  `'personalizedAds'`.\n   * If true, user IDs and EIDs will not be shared without evidence of consent for TCF Purpose 4.\n   * If false (the default), evidence of consent for any of Purposes 2-10 is sufficient for sharing user IDs and EIDs.\n   */\n  eidsRequireP4Consent?: boolean;\n}\n\ndeclare module '../src/consentHandler' {\n  interface ConsentManagementConfig {\n    /**\n     * If false (the default), allows some use of storage regardless of purpose 1 consent.\n     */\n    [STRICT_STORAGE_ENFORCEMENT]?: boolean;\n  }\n\n}\ndeclare module './consentManagementTcf' {\n  interface TCFConfig {\n    rules?: TCFControlRule[];\n  }\n}\n\n/**\n * A configuration function that initializes some module variables, as well as adds hooks\n * @param {Object} config - GDPR enforcement config object\n */\nexport function setEnforcementConfig(config) {\n  let rules: Record<keyof typeof CONFIGURABLE_RULES, TCFControlRule> = deepAccess(config, 'gdpr.rules');\n  if (!rules) {\n    logWarn('TCF2: enforcing P1 and P2 by default');\n  }\n  rules = Object.fromEntries((rules as any || []).map(r => [r.purpose, r])) as any;\n  strictStorageEnforcement = !!deepAccess(config, STRICT_STORAGE_ENFORCEMENT);\n\n  Object.entries(CONFIGURABLE_RULES).forEach(([name, opts]) => {\n    ACTIVE_RULES[opts.type][opts.id] = rules[name] ?? opts.default;\n  });\n\n  if (!hooksAdded) {\n    if (ACTIVE_RULES.purpose[1] != null) {\n      hooksAdded = true;\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_ACCESS_DEVICE, RULE_NAME, accessDeviceRule));\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_SYNC_USER, RULE_NAME, syncUserRule));\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_ENRICH_EIDS, RULE_NAME, enrichEidsRule));\n      processRequestOptions.after(checkIfCredentialsAllowed);\n    }\n    if (ACTIVE_RULES.purpose[2] != null) {\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_FETCH_BIDS, RULE_NAME, fetchBidsRule));\n    }\n    if (ACTIVE_RULES.purpose[4] != null) {\n      RULE_HANDLES.push(\n        registerActivityControl(ACTIVITY_TRANSMIT_UFPD, RULE_NAME, ufpdRule),\n        registerActivityControl(ACTIVITY_ENRICH_UFPD, RULE_NAME, ufpdRule)\n      );\n    }\n    if (ACTIVE_RULES.purpose[7] != null) {\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_REPORT_ANALYTICS, RULE_NAME, reportAnalyticsRule));\n    }\n    if (ACTIVE_RULES.feature[1] != null) {\n      RULE_HANDLES.push(registerActivityControl(ACTIVITY_TRANSMIT_PRECISE_GEO, RULE_NAME, transmitPreciseGeoRule));\n    }\n    RULE_HANDLES.push(registerActivityControl(ACTIVITY_TRANSMIT_EIDS, RULE_NAME, transmitEidsRule));\n  }\n}\n\nexport function checkIfCredentialsAllowed(next, options: { withCredentials?: boolean } = {}, moduleType?: string, moduleName?: string) {\n  if (!options.withCredentials || (moduleType && moduleName)) {\n    next(options);\n    return;\n  }\n  const consentData = gdprDataHandler.getConsentData();\n  const rule = ACTIVE_RULES.purpose[1];\n  const ruleOptions = CONFIGURABLE_RULES[rule.purpose];\n  const {purpose} = getConsent(consentData, ruleOptions.type, ruleOptions.id, null);\n\n  if (!purpose && rule.enforcePurpose) {\n    options.withCredentials = false;\n    logWarn(`${RULE_NAME} denied ${ACTIVITY_ACCESS_REQUEST_CREDENTIALS}`);\n  }\n  next(options);\n}\n\nexport function uninstall() {\n  while (RULE_HANDLES.length) RULE_HANDLES.pop()();\n  processRequestOptions.getHooks({hook: checkIfCredentialsAllowed}).remove();\n  hooksAdded = false;\n}\n\nconfig.getConfig('consentManagement', config => setEnforcementConfig(config.consentManagement));\n"],"names":["registerModule","__r0","deepAccess","logError","logWarn","config","adapterManager","gdprDataHandler","events","EVENTS","GDPR_GVLIDS","VENDORLESS_GVLID","MODULE_TYPE_ANALYTICS","MODULE_TYPE_BIDDER","MODULE_TYPE_PREBID","MODULE_TYPE_RTD","MODULE_TYPE_UID","ACTIVITY_PARAM_ANL_CONFIG","ACTIVITY_PARAM_COMPONENT_NAME","ACTIVITY_PARAM_COMPONENT_TYPE","registerActivityControl","ACTIVITY_ACCESS_DEVICE","ACTIVITY_ACCESS_REQUEST_CREDENTIALS","ACTIVITY_ENRICH_EIDS","ACTIVITY_ENRICH_UFPD","ACTIVITY_FETCH_BIDS","ACTIVITY_REPORT_ANALYTICS","ACTIVITY_SYNC_USER","ACTIVITY_TRANSMIT_EIDS","ACTIVITY_TRANSMIT_PRECISE_GEO","ACTIVITY_TRANSMIT_UFPD","processRequestOptions","STRICT_STORAGE_ENFORCEMENT","ACTIVE_RULES","purpose","feature","CONSENT_PATHS","CONFIGURABLE_RULES","storage","type","default","enforcePurpose","enforceVendor","vendorExceptions","id","basicAds","personalizedAds","eidsRequireP4Consent","measurement","transmitPreciseGeo","storageBlocked","Set","biddersBlocked","analyticsBlocked","ufpdBlocked","eidsBlocked","geoBlocked","hooksAdded","strictStorageEnforcement","GVLID_LOOKUP_PRIORITY","RULE_NAME","RULE_HANDLES","LI_PURPOSES","PUBLISHER_LI_PURPOSES","getGvlid","moduleType","moduleName","fallbackFn","gvlMapping","getConfig","gvlid","modules","get","Object","keys","length","hasOwnProperty","getGvlidFromAnalyticsAdapter","code","adapter","getAnalyticsAdapter","call","e","shouldEnforce","consentData","name","enabled","gdprApplies","getConsentOrLI","path","acceptLI","data","consents","legitimateInterests","getConsent","purposeNo","gvlId","liPurposes","includes","vendor","validateRules","rule","currentModule","ruleOptions","vendorConsentRequred","softVendorExceptions","gdprRule","checkConsent","blocked","arguments","undefined","gvlidFallback","params","getConsentData","modName","allow","add","singlePurposeGdprRule","cd","exceptPrebidModules","ruleFn","accessDeviceRule","syncUserRule","enrichEidsRule","fetchBidsRule","reportAnalyticsRule","ufpdRule","transmitEidsRule","check2to10Consent","pno","defaultBehavior","p4Behavior","fn","_len","args","Array","_key","apply","transmitPreciseGeoRule","emitTCF2FinalResults","formatSet","st","from","filter","el","tcf2FinalResults","emit","TCF2_ENFORCEMENT","forEach","clear","on","AUCTION_END","setEnforcementConfig","rules","fromEntries","map","r","entries","_ref","opts","push","after","checkIfCredentialsAllowed","next","options","withCredentials","uninstall","pop","getHooks","hook","remove","consentManagement"],"sourceRoot":""}