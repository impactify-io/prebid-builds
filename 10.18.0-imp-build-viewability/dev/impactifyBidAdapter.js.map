{"version":3,"file":"impactifyBidAdapter.js","mappings":"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","sources":["webpack:///../../modules/impactifyBidAdapter.js"],"sourcesContent":["'use strict';\n\nimport {getDNT} from '../libraries/dnt/index.js';\nimport { deepAccess, deepSetValue, getWinDimensions, isPlainObject, getWindowTop } from '../src/utils.js';\nimport { registerBidder } from '../src/adapters/bidderFactory.js';\nimport { config } from '../src/config.js';\nimport { ajax } from '../src/ajax.js';\nimport { getStorageManager } from '../src/storageManager.js';\nimport { isViewabilityMeasurable, getViewability } from '../libraries/percentInView/percentInView.js';\n\n/**\n * @typedef {import('../src/adapters/bidderFactory.js').BidRequest} BidRequest\n * @typedef {import('../src/adapters/bidderFactory.js').Bid} Bid\n * @typedef {import('../src/adapters/bidderFactory.js').ServerResponse} ServerResponse\n * @typedef {import('../src/adapters/bidderFactory.js').SyncOptions} SyncOptions\n * @typedef {import('../src/adapters/bidderFactory.js').UserSync} UserSync\n */\n\nconst BIDDER_CODE = 'impactify';\nconst BIDDER_ALIAS = ['imp'];\nconst DEFAULT_CURRENCY = 'USD';\nconst DEFAULT_VIDEO_WIDTH = 640;\nconst DEFAULT_VIDEO_HEIGHT = 360;\nconst ORIGIN = 'https://sonic.impactify.media';\nconst LOGGER_URI = 'https://logger.impactify.media';\nconst AUCTION_URI = '/bidder';\nconst COOKIE_SYNC_URI = '/static/cookie_sync.html';\nconst GVL_ID = 606;\nconst GET_CONFIG = config.getConfig;\nexport const STORAGE = getStorageManager({ gvlid: GVL_ID, bidderCode: BIDDER_CODE });\nexport const STORAGE_KEY = '_im_str'\n\n/**\n * Helpers object\n * @type {Object}\n */\nconst helpers = {\n  getExtParamsFromBid(bid) {\n    const ext = {\n      impactify: {\n        appId: bid.params.appId\n      },\n    };\n\n    if (typeof bid.params.format === 'string') {\n      ext.impactify.format = bid.params.format;\n    }\n\n    if (typeof bid.params.style === 'string') {\n      ext.impactify.style = bid.params.style;\n    }\n\n    if (typeof bid.params.container === 'string') {\n      ext.impactify.container = bid.params.container;\n    }\n\n    if (typeof bid.params.size === 'string') {\n      ext.impactify.size = bid.params.size;\n    }\n\n    //viewability params\n    const viewability = this.getViewability(bid);\n    ext.impactify.viewability = viewability;\n    console.log(\"\\n\\n----------'ðŸ‘ï¸ viewability ðŸ‘ï¸'----------\");\n    console.log(viewability);\n    console.log(\"--------------------------------\\n\\n\");\n    \n\n    return ext;\n  },\n\n  getViewability(bid){\n    let elementSize;\n    if(bid.mediaTypes?.banner?.sizes?.[0]){\n      elementSize = bid.mediaTypes?.banner?.sizes?.[0];\n    }\n    if(bid.mediaTypes?.video?.playerSize?.[0]){\n      elementSize = bid.mediaTypes?.video?.playerSize?.[0];\n    }\n       if (!elementSize) { elementSize = [0, 0]; }\n\n    const size = {w: elementSize[0], h: elementSize[1]};\n    \n    const element = document.getElementById(bid.adUnitCode);\n    if (!element) return;\n\n    const viewabilityAmount = isViewabilityMeasurable(element)\n        ? getViewability(element, getWindowTop(), size)\n        : 'na';\n        \n    return isNaN(viewabilityAmount) ? viewabilityAmount : Math.round(viewabilityAmount);\n  },\n\n  getDeviceType() {\n    // OpenRTB Device type\n    if ((/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase()))) {\n      return 5;\n    }\n    if ((/iphone|ipod|android|blackberry|opera|mini|windows\\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase()))) {\n      return 4;\n    }\n    return 2;\n  },\n\n  createOrtbImpBannerObj(bid, bannerObj) {\n    const format = [];\n    bannerObj.sizes.forEach(size => format.push({ w: size[0], h: size[1] }));\n\n    return {\n      id: 'banner-' + bid.bidId,\n      format\n    }\n  },\n\n  createOrtbImpVideoObj(bid) {\n    return {\n      id: 'video-' + bid.bidId,\n      playerSize: [DEFAULT_VIDEO_WIDTH, DEFAULT_VIDEO_HEIGHT],\n      context: 'outstream',\n      mimes: ['video/mp4'],\n    }\n  },\n\n  getFloor(bid) {\n    const floorInfo = bid.getFloor({\n      currency: DEFAULT_CURRENCY,\n      mediaType: '*',\n      size: '*'\n    });\n    if (isPlainObject(floorInfo) && floorInfo.currency === DEFAULT_CURRENCY && !isNaN(parseFloat(floorInfo.floor))) {\n      return parseFloat(floorInfo.floor);\n    }\n    return null;\n  },\n\n  getImStrFromLocalStorage() {\n    return STORAGE.localStorageIsEnabled(false) ? STORAGE.getDataFromLocalStorage(STORAGE_KEY, false) : '';\n  }\n\n}\n\n/**\n * Create an OpenRTB formated object from prebid payload\n * @param validBidRequests\n * @param bidderRequest\n * @returns {{cur: string[], validBidRequests, id, source: {tid}, imp: *[]}}\n */\nfunction createOpenRtbRequest(validBidRequests, bidderRequest) {\n  // Create request and set imp bids inside\n  const request = {\n    id: bidderRequest.bidderRequestId,\n    validBidRequests,\n    cur: [DEFAULT_CURRENCY],\n    imp: [],\n    source: { tid: bidderRequest.ortb2?.source?.tid }\n  };\n\n  // Get the url parameters\n  const queryString = window.location.search;\n  const urlParams = new URLSearchParams(queryString);\n  const checkPrebid = urlParams.get('_checkPrebid');\n\n  // Force impactify debugging parameter if present\n  if (checkPrebid != null) {\n    request.test = Number(checkPrebid);\n  }\n\n  // Set SChain in request\n  const schain = deepAccess(validBidRequests, '0.ortb2.source.ext.schain');\n  if (schain) request.source.ext = { schain: schain };\n\n  // Set Eids\n  const eids = deepAccess(validBidRequests, '0.userIdAsEids');\n  if (eids && eids.length) {\n    deepSetValue(request, 'user.ext.eids', eids);\n  }\n\n  // Set device/user/site\n  if (!request.device) request.device = {};\n  if (!request.site) request.site = {};\n  request.device = {\n    w: getWinDimensions().innerWidth,\n    h: getWinDimensions().innerHeight,\n    devicetype: helpers.getDeviceType(),\n    ua: navigator.userAgent,\n    js: 1,\n    dnt: getDNT() ? 1 : 0,\n    language: ((navigator.language || navigator.userLanguage || '').split('-'))[0] || 'en',\n  };\n  request.site = { page: bidderRequest.refererInfo.page };\n\n  // Handle privacy settings for GDPR/CCPA/COPPA\n  let gdprApplies = 0;\n  if (bidderRequest.gdprConsent) {\n    if (typeof bidderRequest.gdprConsent.gdprApplies === 'boolean') gdprApplies = bidderRequest.gdprConsent.gdprApplies ? 1 : 0;\n    deepSetValue(request, 'user.ext.consent', bidderRequest.gdprConsent.consentString);\n  }\n  deepSetValue(request, 'regs.ext.gdpr', gdprApplies);\n\n  if (GET_CONFIG('coppa') === true) deepSetValue(request, 'regs.coppa', 1);\n\n  if (bidderRequest.uspConsent) {\n    deepSetValue(request, 'regs.ext.us_privacy', bidderRequest.uspConsent);\n  }\n\n  // Create imps with bids\n  validBidRequests.forEach((bid) => {\n    const bannerObj = deepAccess(bid.mediaTypes, `banner`);\n    const videoObj = deepAccess(bid.mediaTypes, `video`);\n\n    const imp = {\n      id: bid.bidId,\n      bidfloor: bid.params.bidfloor ? bid.params.bidfloor : 0,\n      ext: helpers.getExtParamsFromBid(bid)\n    };\n\n    if (bannerObj) {\n      imp.banner = {\n        ...helpers.createOrtbImpBannerObj(bid, bannerObj)\n      }\n    } else if (videoObj){\n      imp.video = {\n        ...helpers.createOrtbImpVideoObj(bid)\n      }\n    }\n\n    if (typeof bid.getFloor === 'function') {\n      const floor = helpers.getFloor(bid);\n      if (floor) {\n        imp.bidfloor = floor;\n      }\n    }\n\n    request.imp.push(imp);\n  });\n\n  return request;\n}\n\n/**\n * Export BidderSpec type object and register it to Prebid\n * @type {{supportedMediaTypes: string[], interpretResponse: ((function(ServerResponse, *): Bid[])|*), code: string, aliases: string[], getUserSyncs: ((function(SyncOptions, ServerResponse[], *, *): UserSync[])|*), buildRequests: (function(*, *): {method: string, data: string, url}), onTimeout: (function(*): boolean), gvlid: number, isBidRequestValid: ((function(BidRequest): (boolean))|*), onBidWon: (function(*): boolean)}}\n */\nexport const spec = {\n  code: BIDDER_CODE,\n  gvlid: GVL_ID,\n  supportedMediaTypes: ['video', 'banner'],\n  aliases: BIDDER_ALIAS,\n  storageAllowed: true,\n\n  /**\n   * Determines whether or not the given bid request is valid.\n   *\n   * @param {BidRequest} bid The bid params to validate.\n   * @return boolean True if this is a valid bid, and false otherwise.\n   */\n  isBidRequestValid: function (bid) {\n    if (typeof bid.params.appId !== 'string' || !bid.params.appId) {\n      return false;\n    }\n    if (typeof bid.params.format !== 'string' || typeof bid.params.style !== 'string' || !bid.params.format || !bid.params.style) {\n      return false;\n    }\n    if (bid.params.format !== 'screen' && bid.params.format !== 'display') {\n      return false;\n    }\n    if (bid.params.style !== 'inline' && bid.params.style !== 'impact' && bid.params.style !== 'static') {\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\n   * Make a server request from the list of BidRequests.\n   *\n   * @param {Array} validBidRequests - an array of bids\n   * @param {Object} bidderRequest - the bidding request\n   * @return {Object} Info describing the request to the server.\n   */\n  buildRequests: function (validBidRequests, bidderRequest) {\n    // Create a clean openRTB request\n    const request = createOpenRtbRequest(validBidRequests, bidderRequest);\n    const imStr = helpers.getImStrFromLocalStorage();\n    const options = {}\n\n    if (imStr) {\n      options.customHeaders = {\n        'x-impact': imStr\n      };\n    }\n\n    return {\n      method: 'POST',\n      url: ORIGIN + AUCTION_URI,\n      data: JSON.stringify(request),\n      options\n    };\n  },\n\n  /**\n   * Unpack the response from the server into a list of bids.\n   *\n   * @param {ServerResponse} serverResponse A successful response from the server.\n   * @return {Bid[]} An array of bids which were nested inside the server.\n   */\n  interpretResponse: function (serverResponse, bidRequest) {\n    const serverBody = serverResponse.body;\n    let bidResponses = [];\n\n    if (!serverBody) {\n      return bidResponses;\n    }\n\n    if (!serverBody.seatbid || !serverBody.seatbid.length) {\n      return [];\n    }\n\n    serverBody.seatbid.forEach((seatbid) => {\n      if (seatbid.bid.length) {\n        bidResponses = [\n          ...bidResponses,\n          ...seatbid.bid\n            .filter((bid) => bid.price > 0)\n            .map((bid) => ({\n              id: bid.id,\n              requestId: bid.impid,\n              cpm: bid.price,\n              currency: serverBody.cur,\n              netRevenue: true,\n              ad: bid.adm,\n              width: bid.w || 0,\n              height: bid.h || 0,\n              ttl: 300,\n              creativeId: bid.crid || 0,\n              hash: bid.hash,\n              expiry: bid.expiry,\n              meta: {\n                advertiserDomains: bid.adomain && bid.adomain.length ? bid.adomain : []\n              }\n            })),\n        ];\n      }\n    });\n\n    return bidResponses;\n  },\n\n  /**\n   * Register the user sync pixels which should be dropped after the auction.\n   *\n   * @param {SyncOptions} syncOptions Which user syncs are allowed?\n   * @param {ServerResponse[]} serverResponses List of server's responses.\n   * @return {UserSync[]} The user syncs which should be dropped.\n   */\n  getUserSyncs: function (\n    syncOptions,\n    serverResponses,\n    gdprConsent,\n    uspConsent\n  ) {\n    if (!serverResponses || serverResponses.length === 0) {\n      return [];\n    }\n\n    if (!syncOptions.iframeEnabled) {\n      return [];\n    }\n\n    let params = '';\n    if (gdprConsent && typeof gdprConsent.consentString === 'string') {\n      if (typeof gdprConsent.gdprApplies === 'boolean') {\n        params += `?gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`;\n      } else {\n        params += `?gdpr_consent=${gdprConsent.consentString}`;\n      }\n    }\n\n    if (uspConsent) {\n      params += `${params ? '&' : '?'}us_privacy=${encodeURIComponent(uspConsent)}`;\n    }\n\n    if (document.location.search.match(/pbs_debug=true/)) params += `&pbs_debug=true`;\n\n    return [{\n      type: 'iframe',\n      url: ORIGIN + COOKIE_SYNC_URI + params\n    }];\n  },\n\n  /**\n   * Register bidder specific code, which will execute if a bid from this bidder won the auction\n   * @param {Object} bid The bid that won the auction\n   */\n  onBidWon: function (bid) {\n    ajax(`${LOGGER_URI}/prebid/won`, null, JSON.stringify(bid), {\n      method: 'POST',\n      contentType: 'application/json'\n    });\n\n    return true;\n  },\n\n  /**\n   * Register bidder specific code, which will execute if bidder timed out after an auction\n   * @param {Object} data Containing timeout specific data\n   */\n  onTimeout: function (data) {\n    ajax(`${LOGGER_URI}/prebid/timeout`, null, JSON.stringify(data[0]), {\n      method: 'POST',\n      contentType: 'application/json'\n    });\n\n    return true;\n  },\n};\nregisterBidder(spec);\n"],"names":["_defineProperty","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","registerModule","__r0","getDNT","deepAccess","deepSetValue","getWinDimensions","isPlainObject","getWindowTop","registerBidder","config","ajax","getStorageManager","isViewabilityMeasurable","getViewability","BIDDER_CODE","BIDDER_ALIAS","DEFAULT_CURRENCY","DEFAULT_VIDEO_WIDTH","DEFAULT_VIDEO_HEIGHT","ORIGIN","LOGGER_URI","AUCTION_URI","COOKIE_SYNC_URI","GVL_ID","GET_CONFIG","getConfig","STORAGE","gvlid","bidderCode","STORAGE_KEY","helpers","getExtParamsFromBid","bid","ext","impactify","appId","params","format","style","container","size","viewability","console","log","_bid$mediaTypes","_bid$mediaTypes3","elementSize","mediaTypes","banner","sizes","_bid$mediaTypes2","video","playerSize","_bid$mediaTypes4","w","h","element","document","getElementById","adUnitCode","viewabilityAmount","isNaN","Math","round","getDeviceType","test","navigator","userAgent","toLowerCase","createOrtbImpBannerObj","bannerObj","id","bidId","createOrtbImpVideoObj","context","mimes","getFloor","floorInfo","currency","mediaType","parseFloat","floor","getImStrFromLocalStorage","localStorageIsEnabled","getDataFromLocalStorage","createOpenRtbRequest","validBidRequests","bidderRequest","_bidderRequest$ortb","request","bidderRequestId","cur","imp","source","tid","ortb2","queryString","window","location","search","urlParams","URLSearchParams","checkPrebid","get","Number","schain","eids","device","site","innerWidth","innerHeight","devicetype","ua","js","dnt","language","userLanguage","split","page","refererInfo","gdprApplies","gdprConsent","consentString","uspConsent","videoObj","bidfloor","spec","code","supportedMediaTypes","aliases","storageAllowed","isBidRequestValid","buildRequests","imStr","options","customHeaders","method","url","data","JSON","stringify","interpretResponse","serverResponse","bidRequest","serverBody","body","bidResponses","seatbid","price","map","requestId","impid","cpm","netRevenue","ad","adm","width","height","ttl","creativeId","crid","hash","expiry","meta","advertiserDomains","adomain","getUserSyncs","syncOptions","serverResponses","iframeEnabled","concat","encodeURIComponent","match","type","onBidWon","contentType","onTimeout"],"sourceRoot":""}