{"version":3,"file":"debugging.js","mappings":"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","sources":["webpack:///../../modules/debugging/bidInterceptor.js","webpack:///../../modules/debugging/debugging.js","webpack:///../../modules/debugging/index.js","webpack:///../../modules/debugging/legacy.js","webpack:///../../modules/debugging/pbsInterceptor.js","webpack:///../../modules/debugging/responses.js"],"sourcesContent":["import makeResponseResolvers from './responses.js';\n\n/**\n * @typedef {Number|String|boolean|null|undefined} Scalar\n */\n\nexport function makebidInterceptor({utils, BANNER, NATIVE, VIDEO, Renderer}) {\n  const {deepAccess, deepClone, delayExecution, hasNonSerializableProperty, mergeDeep} = utils;\n  const responseResolvers = makeResponseResolvers({Renderer, BANNER, NATIVE, VIDEO});\n  function BidInterceptor(opts = {}) {\n    ({setTimeout: this.setTimeout = window.setTimeout.bind(window)} = opts);\n    this.logger = opts.logger;\n    this.rules = [];\n  }\n\n  Object.assign(BidInterceptor.prototype, {\n    DEFAULT_RULE_OPTIONS: {\n      delay: 0\n    },\n    serializeConfig(ruleDefs) {\n      const isSerializable = (ruleDef, i) => {\n        const serializable = !hasNonSerializableProperty(ruleDef);\n        if (!serializable && !deepAccess(ruleDef, 'options.suppressWarnings')) {\n          this.logger.logWarn(`Bid interceptor rule definition #${i + 1} contains non-serializable properties and will be lost after a refresh. Rule definition: `, ruleDef);\n        }\n        return serializable;\n      }\n      return ruleDefs.filter(isSerializable);\n    },\n    updateConfig(config) {\n      this.rules = (config.intercept || []).map((ruleDef, i) => this.rule(ruleDef, i + 1))\n    },\n    /**\n     * @typedef {Object} RuleOptions\n     * @property {Number} [delay=0] delay between bid interception and mocking of response (to simulate network delay)\n     * @property {boolean} [suppressWarnings=false] if enabled, do not warn about unserializable rules\n     *\n     * @typedef {Object} Rule\n     * @property {Number} no rule number (used only as an identifier for logging)\n     * @property {function({}, {}): boolean} match a predicate function that tests a bid against this rule\n     * @property {ReplacerFn} replacer generator function for mock bid responses\n     * @property {RuleOptions} options\n     */\n\n    /**\n     * @param {{}} ruleDef\n     * @param {Number} ruleNo\n     * @returns {Rule}\n     */\n    rule(ruleDef, ruleNo) {\n      return {\n        no: ruleNo,\n        match: this.matcher(ruleDef.when, ruleNo),\n        replace: this.replacer(ruleDef.then, ruleNo),\n        options: Object.assign({}, this.DEFAULT_RULE_OPTIONS, ruleDef.options),\n        paapi: this.paapiReplacer(ruleDef.paapi || [], ruleNo)\n      }\n    },\n    /**\n     * @typedef {Function} MatchPredicate\n     * @param {*} candidate a bid to match, or a portion of it if used inside an ObjectMather.\n     * e.g. matcher((bid, bidRequest) => ....) or matcher({property: (property, bidRequest) => ...})\n     * @param {*} bidRequest the request `candidate` belongs to\n     * @returns {boolean}\n     *\n     */\n\n    /**\n     * @param {*} matchDef matcher definition\n     * @param {Number} ruleNo\n     * @returns {MatchPredicate} a predicate function that matches a bid against the given `matchDef`\n     */\n    matcher(matchDef, ruleNo) {\n      if (typeof matchDef === 'function') {\n        return matchDef;\n      }\n      if (typeof matchDef !== 'object') {\n        this.logger.logError(`Invalid 'when' definition for debug bid interceptor (in rule #${ruleNo})`);\n        return () => false;\n      }\n      function matches(candidate, {ref = matchDef, args = []}) {\n        return Object.entries(ref).map(([key, val]) => {\n          const cVal = candidate[key];\n          if (val instanceof RegExp) {\n            return val.exec(cVal) != null;\n          }\n          if (typeof val === 'function') {\n            return !!val(cVal, ...args);\n          }\n          if (typeof val === 'object') {\n            return matches(cVal, {ref: val, args});\n          }\n          return cVal === val;\n        }).every((i) => i);\n      }\n      return (candidate, ...args) => matches(candidate, {args});\n    },\n    /**\n     * @typedef {Function} ReplacerFn\n     * @param {*} bid a bid that was intercepted\n     * @param {*} bidRequest the request `bid` belongs to\n     * @returns {*} the response to mock for `bid`, or a portion of it if used inside an ObjectReplacer.\n     * e.g. replacer((bid, bidRequest) => mockResponse) or replacer({property: (bid, bidRequest) => mockProperty})\n     *\n     */\n\n    /**\n     * @param {*} replDef replacer definition\n     * @param ruleNo\n     * @return {ReplacerFn}\n     */\n    replacer(replDef, ruleNo) {\n      if (replDef === null) {\n        return () => null\n      }\n      replDef = replDef || {};\n      let replFn;\n      if (typeof replDef === 'function') {\n        replFn = ({args}) => replDef(...args);\n      } else if (typeof replDef !== 'object') {\n        this.logger.logError(`Invalid 'then' definition for debug bid interceptor (in rule #${ruleNo})`);\n        replFn = () => ({});\n      } else {\n        replFn = ({args, ref = replDef}) => {\n          const result = Array.isArray(ref) ? [] : {};\n          Object.entries(ref).forEach(([key, val]) => {\n            if (typeof val === 'function') {\n              result[key] = val(...args);\n            } else if (val != null && typeof val === 'object') {\n              result[key] = replFn({args, ref: val})\n            } else {\n              result[key] = val;\n            }\n          });\n          return result;\n        }\n      }\n      return (bid, ...args) => {\n        const response = this.responseDefaults(bid);\n        mergeDeep(response, replFn({args: [bid, ...args]}));\n        const resolver = responseResolvers[response.mediaType];\n        resolver && resolver(bid, response);\n        response.isDebug = true;\n        return response;\n      }\n    },\n\n    paapiReplacer(paapiDef, ruleNo) {\n      function wrap(configs = []) {\n        return configs.map(config => {\n          return Object.keys(config).some(k => !['config', 'igb'].includes(k))\n            ? {config}\n            : config\n        });\n      }\n      if (Array.isArray(paapiDef)) {\n        return () => wrap(paapiDef);\n      } else if (typeof paapiDef === 'function') {\n        return (...args) => wrap(paapiDef(...args))\n      } else {\n        this.logger.logError(`Invalid 'paapi' definition for debug bid interceptor (in rule #${ruleNo})`);\n      }\n    },\n\n    responseDefaults(bid) {\n      const response = {\n        requestId: bid.bidId,\n        cpm: 3.5764,\n        currency: 'EUR',\n        ttl: 360,\n        creativeId: 'mock-creative-id',\n        netRevenue: false,\n        meta: {}\n      };\n\n      if (!bid.mediaType) {\n        response.mediaType = Object.keys(bid.mediaTypes ?? {})[0] ?? BANNER;\n      }\n      let size;\n      if (response.mediaType === BANNER) {\n        size = bid.mediaTypes?.banner?.sizes?.[0] ?? [300, 250];\n      } else if (response.mediaType === VIDEO) {\n        size = bid.mediaTypes?.video?.playerSize?.[0] ?? [600, 500];\n      }\n      if (Array.isArray(size)) {\n        ([response.width, response.height] = size);\n      }\n      return response;\n    },\n    /**\n     * Match a candidate bid against all registered rules.\n     *\n     * @param {{}} candidate\n     * @param args\n     * @returns {Rule|undefined} the first matching rule, or undefined if no match was found.\n     */\n    match(candidate, ...args) {\n      return this.rules.find((rule) => rule.match(candidate, ...args));\n    },\n    /**\n     * Match a set of bids against all registered rules.\n     *\n     * @param bids\n     * @param bidRequest\n     * @returns {[{bid: *, rule: Rule}[], *[]]} a 2-tuple for matching bids (decorated with the matching rule) and\n     * non-matching bids.\n     */\n    matchAll(bids, bidRequest) {\n      const [matches, remainder] = [[], []];\n      bids.forEach((bid) => {\n        const rule = this.match(bid, bidRequest);\n        if (rule != null) {\n          matches.push({rule: rule, bid: bid});\n        } else {\n          remainder.push(bid);\n        }\n      })\n      return [matches, remainder];\n    },\n    /**\n     * Run a set of bids against all registered rules, filter out those that match,\n     * and generate mock responses for them.\n     *\n     * {{}[]} bids?\n     * {*} bidRequest\n     * {function(*)} addBid called once for each mock response\n     * addPaapiConfig called once for each mock PAAPI config\n     * {function()} done called once after all mock responses have been run through `addBid`\n     * returns {{bids: {}[], bidRequest: {}} remaining bids that did not match any rule (this applies also to\n     * bidRequest.bids)\n     */\n    intercept({bids, bidRequest, addBid, addPaapiConfig, done}) {\n      if (bids == null) {\n        bids = bidRequest.bids;\n      }\n      const [matches, remainder] = this.matchAll(bids, bidRequest);\n      if (matches.length > 0) {\n        const callDone = delayExecution(done, matches.length);\n        matches.forEach((match) => {\n          const mockResponse = match.rule.replace(match.bid, bidRequest);\n          const mockPaapi = match.rule.paapi(match.bid, bidRequest);\n          const delay = match.rule.options.delay;\n          this.logger.logMessage(`Intercepted bid request (matching rule #${match.rule.no}), mocking response in ${delay}ms. Request, response, PAAPI configs:`, match.bid, mockResponse, mockPaapi)\n          this.setTimeout(() => {\n            mockResponse && addBid(mockResponse, match.bid);\n            mockPaapi.forEach(cfg => addPaapiConfig(cfg, match.bid, bidRequest));\n            callDone();\n          }, delay)\n        });\n        bidRequest = deepClone(bidRequest);\n        bids = bidRequest.bids = remainder;\n      } else {\n        this.setTimeout(done, 0);\n      }\n      return {bids, bidRequest};\n    }\n  });\n  return BidInterceptor;\n}\n","import {makebidInterceptor} from './bidInterceptor.js';\nimport {makePbsInterceptor} from './pbsInterceptor.js';\nimport {addHooks, removeHooks} from './legacy.js';\n\nconst interceptorHooks = [];\nlet bidInterceptor;\nlet enabled = false;\n\nfunction enableDebugging(debugConfig, {fromSession = false, config, hook, logger}) {\n  config.setConfig({debug: true});\n  bidInterceptor.updateConfig(debugConfig);\n  resetHooks(true);\n  // also enable \"legacy\" overrides\n  removeHooks({hook});\n  addHooks(debugConfig, {hook, logger});\n  if (!enabled) {\n    enabled = true;\n    logger.logMessage(`Debug overrides enabled${fromSession ? ' from session' : ''}`);\n  }\n}\n\nexport function disableDebugging({hook, logger}) {\n  bidInterceptor.updateConfig(({}));\n  resetHooks(false);\n  // also disable \"legacy\" overrides\n  removeHooks({hook});\n  if (enabled) {\n    enabled = false;\n    logger.logMessage('Debug overrides disabled');\n  }\n}\n\n// eslint-disable-next-line no-restricted-properties\nfunction saveDebuggingConfig(debugConfig, {sessionStorage = window.sessionStorage, DEBUG_KEY, utils} = {}) {\n  const {deepClone} = utils;\n  if (!debugConfig.enabled) {\n    try {\n      sessionStorage.removeItem(DEBUG_KEY);\n    } catch (e) {\n    }\n  } else {\n    if (debugConfig.intercept) {\n      debugConfig = deepClone(debugConfig);\n      debugConfig.intercept = bidInterceptor.serializeConfig(debugConfig.intercept);\n    }\n    try {\n      sessionStorage.setItem(DEBUG_KEY, JSON.stringify(debugConfig));\n    } catch (e) {\n    }\n  }\n}\n\n// eslint-disable-next-line no-restricted-properties\nexport function getConfig(debugging, {getStorage = () => window.sessionStorage, DEBUG_KEY, config, hook, logger, utils} = {}) {\n  if (debugging == null) return;\n  let sessionStorage;\n  try {\n    sessionStorage = getStorage();\n  } catch (e) {\n    logger.logError(`sessionStorage is not available: debugging configuration will not persist on page reload`, e);\n  }\n  if (sessionStorage != null) {\n    saveDebuggingConfig(debugging, {sessionStorage, DEBUG_KEY, utils});\n  }\n  if (!debugging.enabled) {\n    disableDebugging({hook, logger});\n  } else {\n    enableDebugging(debugging, {config, hook, logger});\n  }\n}\n\nexport function sessionLoader({DEBUG_KEY, storage, config, hook, logger}) {\n  let overrides;\n  try {\n    // eslint-disable-next-line no-restricted-properties\n    storage = storage || window.sessionStorage;\n    overrides = JSON.parse(storage.getItem(DEBUG_KEY));\n  } catch (e) {\n  }\n  if (overrides) {\n    enableDebugging(overrides, {fromSession: true, config, hook, logger});\n  }\n}\n\nfunction resetHooks(enable) {\n  interceptorHooks.forEach(([getHookFn, interceptor]) => {\n    getHookFn().getHooks({hook: interceptor}).remove();\n  });\n  if (enable) {\n    interceptorHooks.forEach(([getHookFn, interceptor]) => {\n      getHookFn().before(interceptor);\n    });\n  }\n}\n\nfunction registerBidInterceptor(getHookFn, interceptor) {\n  const interceptBids = (...args) => bidInterceptor.intercept(...args);\n  interceptorHooks.push([getHookFn, function (next, ...args) {\n    interceptor(next, interceptBids, ...args);\n  }]);\n}\n\nexport function makeBidderBidInterceptor({utils}) {\n  const {delayExecution} = utils;\n  return function bidderBidInterceptor(next, interceptBids, spec, bids, bidRequest, ajax, wrapCallback, cbs) {\n    const done = delayExecution(cbs.onCompletion, 2);\n    ({bids, bidRequest} = interceptBids({\n      bids,\n      bidRequest,\n      addBid: wrapCallback(cbs.onBid),\n      addPaapiConfig: wrapCallback((config, bidRequest) => cbs.onPaapi({bidId: bidRequest.bidId, ...config})),\n      done\n    }));\n    if (bids.length === 0) {\n      cbs.onResponse?.({}); // trigger onResponse so that the bidder may be marked as \"timely\" if necessary\n      done();\n    } else {\n      next(spec, bids, bidRequest, ajax, wrapCallback, {...cbs, onCompletion: done});\n    }\n  }\n}\n\nexport function install({DEBUG_KEY, config, hook, createBid, logger, utils, BANNER, NATIVE, VIDEO, Renderer}) {\n  const BidInterceptor = makebidInterceptor({utils, BANNER, NATIVE, VIDEO, Renderer});\n  bidInterceptor = new BidInterceptor({logger});\n  const pbsBidInterceptor = makePbsInterceptor({createBid, utils});\n  registerBidInterceptor(() => hook.get('processBidderRequests'), makeBidderBidInterceptor({utils}));\n  registerBidInterceptor(() => hook.get('processPBSRequest'), pbsBidInterceptor);\n  sessionLoader({DEBUG_KEY, config, hook, logger});\n  config.getConfig('debugging', ({debugging}) => getConfig(debugging, {DEBUG_KEY, config, hook, logger, utils}), {init: true});\n}\n","/* eslint prebid/validate-imports: 0 */\n\nimport {config} from '../../src/config.js';\nimport {hook} from '../../src/hook.js';\nimport {install} from './debugging.js';\nimport {prefixLog} from '../../src/utils.js';\nimport {createBid} from '../../src/bidfactory.js';\nimport {DEBUG_KEY} from '../../src/debugging.js';\nimport * as utils from '../../src/utils.js';\nimport {BANNER, NATIVE, VIDEO} from '../../src/mediaTypes.js';\nimport {Renderer} from '../../src/Renderer.js';\n\ninstall({\n  DEBUG_KEY,\n  config,\n  hook,\n  createBid,\n  logger: prefixLog('DEBUG:'),\n  utils,\n  BANNER,\n  NATIVE,\n  VIDEO,\n  Renderer,\n});\n","export let addBidResponseBound;\nexport let addBidderRequestsBound;\n\nexport function addHooks(overrides, {hook, logger}) {\n  addBidResponseBound = addBidResponseHook.bind({overrides, logger});\n  hook.get('addBidResponse').before(addBidResponseBound, 5);\n\n  addBidderRequestsBound = addBidderRequestsHook.bind({overrides, logger});\n  hook.get('addBidderRequests').before(addBidderRequestsBound, 5);\n}\n\nexport function removeHooks({hook}) {\n  hook.get('addBidResponse').getHooks({hook: addBidResponseBound}).remove();\n  hook.get('addBidderRequests').getHooks({hook: addBidderRequestsBound}).remove();\n}\n\n/**\n * @param {{bidder:string, adUnitCode:string}} overrideObj\n * @param {string} bidderCode\n * @param {string} adUnitCode\n * @returns {boolean}\n */\nexport function bidExcluded(overrideObj, bidderCode, adUnitCode) {\n  if (overrideObj.bidder && overrideObj.bidder !== bidderCode) {\n    return true;\n  }\n  if (overrideObj.adUnitCode && overrideObj.adUnitCode !== adUnitCode) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * @param {string[]} bidders\n * @param {string} bidderCode\n * @returns {boolean}\n */\nexport function bidderExcluded(bidders, bidderCode) {\n  return (Array.isArray(bidders) && bidders.indexOf(bidderCode) === -1);\n}\n\n/**\n * @param {Object} overrideObj\n * @param {Object} bidObj\n * @param {Object} bidType\n * @returns {Object} bidObj with overridden properties\n */\nexport function applyBidOverrides(overrideObj, bidObj, bidType, logger) {\n  return Object.keys(overrideObj).filter(key => (['adUnitCode', 'bidder'].indexOf(key) === -1)).reduce(function(result, key) {\n    logger.logMessage(`bidder overrides changed '${result.adUnitCode}/${result.bidderCode}' ${bidType}.${key} from '${result[key]}.js' to '${overrideObj[key]}'`);\n    result[key] = overrideObj[key];\n    result.isDebug = true;\n    return result;\n  }, bidObj);\n}\n\nexport function addBidResponseHook(next, adUnitCode, bid, reject) {\n  const {overrides, logger} = this;\n\n  if (bidderExcluded(overrides.bidders, bid.bidderCode)) {\n    logger.logWarn(`bidder '${bid.bidderCode}' excluded from auction by bidder overrides`);\n    return;\n  }\n\n  if (Array.isArray(overrides.bids)) {\n    overrides.bids.forEach(function(overrideBid) {\n      if (!bidExcluded(overrideBid, bid.bidderCode, adUnitCode)) {\n        applyBidOverrides(overrideBid, bid, 'bidder', logger);\n      }\n    });\n  }\n\n  next(adUnitCode, bid, reject);\n}\n\nexport function addBidderRequestsHook(next, bidderRequests) {\n  const {overrides, logger} = this;\n\n  const includedBidderRequests = bidderRequests.filter(function (bidderRequest) {\n    if (bidderExcluded(overrides.bidders, bidderRequest.bidderCode)) {\n      logger.logWarn(`bidRequest '${bidderRequest.bidderCode}' excluded from auction by bidder overrides`);\n      return false;\n    }\n    return true;\n  });\n\n  if (Array.isArray(overrides.bidRequests)) {\n    includedBidderRequests.forEach(function(bidderRequest) {\n      overrides.bidRequests.forEach(function(overrideBid) {\n        bidderRequest.bids.forEach(function(bid) {\n          if (!bidExcluded(overrideBid, bidderRequest.bidderCode, bid.adUnitCode)) {\n            applyBidOverrides(overrideBid, bid, 'bidRequest', logger);\n          }\n        });\n      });\n    });\n  }\n\n  next(includedBidderRequests);\n}\n","export function makePbsInterceptor({createBid, utils}) {\n  const {deepClone, delayExecution} = utils;\n  return function pbsBidInterceptor(next, interceptBids, s2sBidRequest, bidRequests, ajax, {\n    onResponse,\n    onError,\n    onBid,\n    onFledge,\n  }) {\n    let responseArgs;\n    const done = delayExecution(() => onResponse(...responseArgs), bidRequests.length + 1)\n    function signalResponse(...args) {\n      responseArgs = args;\n      done();\n    }\n    function addBid(bid, bidRequest) {\n      onBid({\n        adUnit: bidRequest.adUnitCode,\n        bid: Object.assign(createBid(bidRequest), {requestBidder: bidRequest.bidder}, bid)\n      })\n    }\n    bidRequests = bidRequests\n      .map((req) => interceptBids({\n        bidRequest: req,\n        addBid,\n        addPaapiConfig(config, bidRequest, bidderRequest) {\n          onFledge({\n            adUnitCode: bidRequest.adUnitCode,\n            ortb2: bidderRequest.ortb2,\n            ortb2Imp: bidRequest.ortb2Imp,\n            ...config\n          })\n        },\n        done\n      }).bidRequest)\n      .filter((req) => req.bids.length > 0)\n\n    if (bidRequests.length > 0) {\n      const bidIds = new Set();\n      bidRequests.forEach((req) => req.bids.forEach((bid) => bidIds.add(bid.bidId)));\n      s2sBidRequest = deepClone(s2sBidRequest);\n      s2sBidRequest.ad_units.forEach((unit) => {\n        unit.bids = unit.bids.filter((bid) => bidIds.has(bid.bid_id));\n      })\n      s2sBidRequest.ad_units = s2sBidRequest.ad_units.filter((unit) => unit.bids.length > 0);\n      next(s2sBidRequest, bidRequests, ajax, {onResponse: signalResponse, onError, onBid});\n    } else {\n      signalResponse(true, []);\n    }\n  }\n}\n","const ORTB_NATIVE_ASSET_TYPES = ['img', 'video', 'link', 'data', 'title'];\n\nfunction getSlotDivid(adUnitCode) {\n  const slot = window.googletag?.pubads?.()?.getSlots?.()?.find?.((slot) => {\n    return slot.getAdUnitPath() === adUnitCode || slot.getSlotElementId() === adUnitCode\n  });\n  return slot?.getSlotElementId();\n}\n\nexport default function ({Renderer, BANNER, NATIVE, VIDEO}) {\n  return {\n    [BANNER]: (bid, bidResponse) => {\n      if (!bidResponse.hasOwnProperty('ad') && !bidResponse.hasOwnProperty('adUrl')) {\n        let [size, repeat] = (bidResponse.width ?? bidResponse.wratio) < (bidResponse.height ?? bidResponse.hratio) ? [bidResponse.width, 'repeat-y'] : [bidResponse.height, 'repeat-x'];\n        size = size == null ? '100%' : `${size}px`;\n        bidResponse.ad = `<html><body><div style=\"display: inline-block; height: ${bidResponse.height == null ? '100%' : bidResponse.height + 'px'}; width: ${bidResponse.width == null ? '100%' : bidResponse.width + 'px'}; background-image: url(https://vcdn.adnxs.com/p/creative-image/27/c0/52/67/27c05267-5a6d-4874-834e-18e218493c32.png); background-size: ${size}; background-repeat: ${repeat}\"></div></body></html>`;\n      }\n    },\n    [VIDEO]: (bid, bidResponse) => {\n      if (!bidResponse.hasOwnProperty('vastXml') && !bidResponse.hasOwnProperty('vastUrl')) {\n        bidResponse.vastXml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?><VAST version=\"3.0\"><Ad><InLine><AdSystem>GDFP</AdSystem><AdTitle>Demo</AdTitle><Description><![CDATA[Demo]]></Description><Creatives><Creative><Linear ><Duration>00:00:11</Duration><VideoClicks><ClickThrough><![CDATA[https://prebid.org/]]></ClickThrough></VideoClicks><MediaFiles><MediaFile delivery=\"progressive\" width=\"640\" height=\"360\" type=\"video/mp4\" scalable=\"true\" maintainAspectRatio=\"true\"><![CDATA[https://s3.amazonaws.com/files.prebid.org/creatives/PrebidLogo.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>';\n        bidResponse.renderer = Renderer.install({\n          url: 'https://cdn.jwplayer.com/libraries/l5MchIxB.js',\n        });\n        bidResponse.renderer.setRender(function (bid, doc) {\n          const parentId = getSlotDivid(bid.adUnitCode) ?? bid.adUnitCode;\n          const div = doc.createElement('div');\n          div.id = `${parentId}-video-player`;\n          doc.getElementById(parentId).appendChild(div);\n          const player = window.jwplayer(div.id).setup({\n            debug: true,\n            width: bidResponse.width,\n            height: bidResponse.height,\n            advertising: {\n              client: 'vast',\n              outstream: true,\n              endstate: 'close'\n            },\n          });\n          player.on('ready', async function () {\n            if (bid.vastUrl) {\n              player.loadAdTag(bid.vastUrl);\n            } else {\n              player.loadAdXml(bid.vastXml);\n            }\n          });\n        })\n      }\n    },\n    [NATIVE]: (bid, bidResponse) => {\n      if (!bidResponse.hasOwnProperty('native')) {\n        bidResponse.native = {\n          ortb: {\n            link: {\n              url: 'https://www.link.example',\n              clicktrackers: ['https://impression.example']\n            },\n            assets: bid.nativeOrtbRequest.assets.map(mapDefaultNativeOrtbAsset)\n          }\n        }\n      }\n    }\n  }\n\n  function mapDefaultNativeOrtbAsset(asset) {\n    const assetType = ORTB_NATIVE_ASSET_TYPES.find(type => asset.hasOwnProperty(type));\n    switch (assetType) {\n      case 'img':\n        return {\n          ...asset,\n          img: {\n            type: 3,\n            w: 600,\n            h: 500,\n            url: 'https://vcdn.adnxs.com/p/creative-image/27/c0/52/67/27c05267-5a6d-4874-834e-18e218493c32.png',\n          }\n        }\n      case 'video':\n        return {\n          ...asset,\n          video: {\n            vasttag: '<?xml version=\"1.0\" encoding=\"UTF-8\"?><VAST version=\"3.0\"><Ad><InLine><AdSystem>GDFP</AdSystem><AdTitle>Demo</AdTitle><Description><![CDATA[Demo]]></Description><Creatives><Creative><Linear ><Duration>00:00:11</Duration><VideoClicks><ClickThrough><![CDATA[https://prebid.org/]]></ClickThrough></VideoClicks><MediaFiles><MediaFile delivery=\"progressive\" width=\"640\" height=\"360\" type=\"video/mp4\" scalable=\"true\" maintainAspectRatio=\"true\"><![CDATA[https://s3.amazonaws.com/files.prebid.org/creatives/PrebidLogo.mp4]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>'\n          }\n        }\n      case 'data': {\n        return {\n          ...asset,\n          data: {\n            value: '5 stars'\n          }\n        }\n      }\n      case 'title': {\n        return {\n          ...asset,\n          title: {\n            text: 'Prebid Native Example'\n          }\n        }\n      }\n    }\n  }\n}\n"],"names":["makeResponseResolvers","makebidInterceptor","_ref","utils","BANNER","NATIVE","VIDEO","Renderer","deepAccess","deepClone","delayExecution","hasNonSerializableProperty","mergeDeep","responseResolvers","BidInterceptor","opts","arguments","length","undefined","setTimeout","window","bind","logger","rules","Object","assign","prototype","DEFAULT_RULE_OPTIONS","delay","serializeConfig","ruleDefs","isSerializable","ruleDef","i","serializable","logWarn","concat","filter","updateConfig","config","intercept","map","rule","ruleNo","no","match","matcher","when","replace","replacer","then","options","paapi","paapiReplacer","matchDef","logError","matches","candidate","_ref2","ref","args","entries","_ref3","key","val","cVal","RegExp","exec","every","_len","Array","_key","replDef","_this","replFn","_ref4","_ref5","result","isArray","forEach","_ref6","bid","response","responseDefaults","_len2","_key2","resolver","mediaType","isDebug","paapiDef","wrap","configs","keys","some","k","includes","requestId","bidId","cpm","currency","ttl","creativeId","netRevenue","meta","_Object$keys$","_bid$mediaTypes","mediaTypes","size","_bid$mediaTypes$banne","_bid$mediaTypes2","banner","sizes","_bid$mediaTypes$video","_bid$mediaTypes3","video","playerSize","width","height","_len3","_key3","find","matchAll","bids","bidRequest","remainder","push","_ref7","addBid","addPaapiConfig","done","callDone","mockResponse","mockPaapi","logMessage","cfg","makePbsInterceptor","addHooks","removeHooks","interceptorHooks","bidInterceptor","enabled","enableDebugging","debugConfig","fromSession","hook","setConfig","debug","resetHooks","disableDebugging","saveDebuggingConfig","sessionStorage","DEBUG_KEY","removeItem","e","setItem","JSON","stringify","getConfig","debugging","getStorage","sessionLoader","storage","overrides","parse","getItem","enable","getHookFn","interceptor","getHooks","remove","before","registerBidInterceptor","interceptBids","next","makeBidderBidInterceptor","bidderBidInterceptor","spec","ajax","wrapCallback","cbs","onCompletion","onBid","onPaapi","_objectSpread","_cbs$onResponse","onResponse","call","install","createBid","pbsBidInterceptor","get","_ref8","init","registerModule","__r0","prefixLog","addBidResponseBound","addBidderRequestsBound","addBidResponseHook","addBidderRequestsHook","bidExcluded","overrideObj","bidderCode","adUnitCode","bidder","bidderExcluded","bidders","indexOf","applyBidOverrides","bidObj","bidType","reduce","reject","overrideBid","bidderRequests","includedBidderRequests","bidderRequest","bidRequests","s2sBidRequest","onError","onFledge","responseArgs","signalResponse","adUnit","requestBidder","req","ortb2","ortb2Imp","bidIds","Set","add","ad_units","unit","has","bid_id","ORTB_NATIVE_ASSET_TYPES","getSlotDivid","_window$googletag","_window$googletag$pub","_window$googletag$pub2","_window$googletag$pub3","slot","googletag","pubads","getSlots","getAdUnitPath","getSlotElementId","bidResponse","hasOwnProperty","_bidResponse$width","_bidResponse$height","repeat","wratio","hratio","ad","vastXml","renderer","url","setRender","doc","_getSlotDivid","parentId","div","createElement","id","getElementById","appendChild","player","jwplayer","setup","advertising","client","outstream","endstate","on","vastUrl","loadAdTag","loadAdXml","native","ortb","link","clicktrackers","assets","nativeOrtbRequest","mapDefaultNativeOrtbAsset","asset","assetType","type","img","w","h","vasttag","data","value","title","text"],"sourceRoot":""}